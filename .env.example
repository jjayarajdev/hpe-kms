# KMS 2.5 Vector Search - Environment Configuration
# Copy this file to .env and update with your values

# ============================================================================
# Application
# ============================================================================
APP_NAME=KMS Vector Search
APP_VERSION=2.5.0
ENVIRONMENT=development  # development, staging, production
LOG_LEVEL=INFO

# ============================================================================
# API Configuration
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true  # Set to false in production

# ============================================================================
# Weaviate Vector Database
# ============================================================================
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=  # Leave empty for local dev with anonymous access
WEAVIATE_TIMEOUT=30

# ============================================================================
# Authentication (SQLite for local dev)
# ============================================================================
AUTH_SECRET_KEY=your-secret-key-change-this-in-production-use-openssl-rand-hex-32
AUTH_ALGORITHM=HS256
AUTH_ACCESS_TOKEN_EXPIRE_MINUTES=60
DB_PATH=data/users.db

# ============================================================================
# OpenAI API (for embeddings)
# ============================================================================
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_API_ENDPOINT=  # Optional: leave empty for default OpenAI endpoint
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_DIMENSIONS=3072
EMBEDDING_BATCH_SIZE=100

# ============================================================================
# SFDC Database Connection
# ============================================================================
SFDC_HOST=your-sfdc-host.salesforce.com
SFDC_USERNAME=your-sfdc-username
SFDC_PASSWORD=your-sfdc-password
SFDC_DATABASE=sfdc_db

# ============================================================================
# Airflow Configuration
# ============================================================================
AIRFLOW__CORE__EXECUTOR=LocalExecutor
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://airflow:airflow@localhost:5432/airflow
AIRFLOW__CORE__FERNET_KEY=your-fernet-key-generate-with-python
AIRFLOW__CORE__DAGS_FOLDER=/opt/airflow/dags
AIRFLOW__CORE__LOAD_EXAMPLES=false

# ============================================================================
# Data Paths
# ============================================================================
DATA_RAW_PATH=data/raw
DATA_PROCESSED_PATH=data/processed
DATA_EMBEDDINGS_PATH=data/embeddings
DATA_TEST_PATH=data/test_datasets

# ============================================================================
# Pipeline Configuration
# ============================================================================
PIPELINE_BATCH_SIZE=1000
PIPELINE_MAX_RETRIES=3
PIPELINE_RETRY_DELAY=5  # seconds

# ============================================================================
# PII Removal Configuration
# ============================================================================
PII_DETECTION_ENABLED=true
PII_REPLACEMENT_TOKEN=[REDACTED]
PII_SPACY_MODEL=en_core_web_sm

# ============================================================================
# Search Configuration
# ============================================================================
SEARCH_HYBRID_ALPHA=0.7  # 0.7 = 70% vector, 30% BM25
SEARCH_DEFAULT_LIMIT=10
SEARCH_MAX_LIMIT=100

# ============================================================================
# Monitoring (Prometheus)
# ============================================================================
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# ============================================================================
# Grafana
# ============================================================================
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# ============================================================================
# Logging
# ============================================================================
LOG_FORMAT=json  # json or text
LOG_FILE=logs/kms.log
LOG_ROTATION=10MB
LOG_RETENTION=7 days

# ============================================================================
# Performance Tuning
# ============================================================================
API_WORKERS=4  # Number of uvicorn workers
API_TIMEOUT=30  # seconds
WEAVIATE_BATCH_SIZE=100
SPARK_MEMORY=4g
SPARK_CORES=2

# ============================================================================
# Testing
# ============================================================================
TEST_WEAVIATE_URL=http://localhost:8080
TEST_DB_PATH=data/test_users.db
